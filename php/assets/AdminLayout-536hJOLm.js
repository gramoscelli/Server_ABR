import{c as l,r as w,a as U,u as $,b as o,j as e,z as r,B as h,X as z,L as d}from"./index-CQK1xMEp.js";import{L as k}from"./lock-D4HCCPhn.js";import{L as _}from"./log-out-CvvekA6y.js";/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]],q=l("arrow-left-right",H);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=[["path",{d:"M15 13a3 3 0 1 0-6 0",key:"10j68g"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}]],E=l("book-user",P);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],B=l("chevron-left",R);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],I=l("chevron-right",D);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],x=l("circle-user",V);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],T=l("dollar-sign",K);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],F=l("key",W);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],m=l("layout-dashboard",X);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],J=l("menu",G);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Y=l("settings",Q);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],ee=l("shield",Z);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],se=l("users",ae);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],re=l("wallet",te),le=[{name:"Panel de Control",href:"/dashboard",icon:m,adminOnly:!0},{name:"Egresos",href:"/cash/expenses",icon:T,adminOnly:!0},{name:"Ingresos",href:"/cash/incomes",icon:re,adminOnly:!0},{name:"Transferencias",href:"/cash/transfers",icon:q,adminOnly:!0},{name:"Usuarios",href:"/admin/users",icon:se,adminOnly:!0},{name:"Socios",href:"/socios",icon:E,adminOnly:!0},{name:"Roles",href:"/admin/roles",icon:ee,rootOnly:!0},{name:"Claves API",href:"/admin/api-keys",icon:F,rootOnly:!0},{name:"Configuración",href:"/admin/settings",icon:Y,rootOnly:!0}];function ce({children:p}){var b,y,v,j,N;const[C,i]=w.useState(!1),[s,M]=w.useState(!1),c=U(),S=$(),t=o.getUser(),A=(t==null?void 0:t.role)==="root",L=(t==null?void 0:t.role)==="admin"||(t==null?void 0:t.role)==="root"||(t==null?void 0:t.role)==="admin_employee";t!=null&&t.role&&["new_user"].includes(t.role.toLowerCase());const O=(t==null?void 0:t.must_change_password)===!0,u=a=>({root:"Administrador",admin_employee:"Empleado de Administración",library_employee:"Empleado de Biblioteca",new_user:"Usuario Nuevo",readonly:"Solo Lectura"})[a]||a,g=le.filter(a=>!("rootOnly"in a&&a.rootOnly&&!A||"adminOnly"in a&&a.adminOnly&&!L));if(O)return e.jsx("div",{className:"min-h-screen bg-gray-50",children:p});const f=async()=>{try{await fetch("/api/auth/logout",{method:"POST",credentials:"include"})}catch(a){console.error("Logout failed:",a)}finally{o.clearAuth(),S("/login")}};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsxs("div",{className:r("sidebar-mobile fixed inset-0 z-40",C?"block":"hidden"),children:[e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>i(!1)}),e.jsxs("div",{className:"fixed inset-y-0 left-0 flex w-72 flex-col bg-gradient-to-b from-slate-900 via-slate-800 to-slate-900 shadow-2xl",children:[e.jsxs("div",{className:"flex h-20 items-center justify-between px-6 border-b border-slate-700/50 bg-gradient-to-r from-blue-600/20 to-purple-600/20",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg shadow-lg",children:e.jsx(m,{className:"h-6 w-6 text-white"})}),e.jsx("span",{className:"text-xl font-bold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent",children:"Servidor de Administración"})]}),e.jsx(h,{variant:"ghost",size:"icon",onClick:()=>i(!1),className:"text-slate-300 hover:text-white hover:bg-slate-800 rounded-lg",children:e.jsx(z,{className:"h-6 w-6"})})]}),e.jsx("nav",{className:"flex-1 space-y-2 px-4 py-6 overflow-y-auto",children:g.map(a=>{const n=c.pathname===a.href;return e.jsxs(d,{to:a.href,className:r("group flex items-center gap-4 rounded-xl px-4 py-3.5 text-sm font-semibold transition-all duration-200",n?"bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-lg shadow-blue-500/30":"text-slate-300 hover:bg-slate-800/60 hover:text-white"),onClick:()=>i(!1),children:[e.jsx(a.icon,{className:r("h-5 w-5 flex-shrink-0 transition-transform duration-200",n?"text-white":"text-slate-400 group-hover:text-blue-400")}),e.jsx("span",{className:"truncate",children:a.name}),n&&e.jsx("div",{className:"ml-auto h-2 w-2 rounded-full bg-white animate-pulse"})]},a.name)})}),e.jsxs("div",{className:"border-t border-slate-700/50 bg-slate-900/50 backdrop-blur-sm p-4 space-y-2",children:[e.jsx("div",{className:"px-3 py-2 mb-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-emerald-500 to-blue-500 rounded-full",children:e.jsx(x,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-semibold text-white truncate",children:((b=o.getUser())==null?void 0:b.username)||"Admin"}),e.jsx("p",{className:"text-xs text-slate-400 truncate",children:u(((y=o.getUser())==null?void 0:y.role)||"")})]})]})}),e.jsxs(d,{to:"/profile",className:r("group flex items-center gap-4 rounded-xl px-4 py-2.5 text-sm font-medium transition-all duration-200",c.pathname==="/profile"?"bg-slate-800 text-blue-400 shadow-md":"text-slate-400 hover:bg-slate-800/60 hover:text-white"),onClick:()=>i(!1),children:[e.jsx(x,{className:"h-4 w-4 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Mi Perfil"})]}),e.jsxs(d,{to:"/change-password",className:r("group flex items-center gap-4 rounded-xl px-4 py-2.5 text-sm font-medium transition-all duration-200",c.pathname==="/change-password"?"bg-slate-800 text-blue-400 shadow-md":"text-slate-400 hover:bg-slate-800/60 hover:text-white"),onClick:()=>i(!1),children:[e.jsx(k,{className:"h-4 w-4 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Cambiar Contraseña"})]}),e.jsxs(h,{variant:"ghost",className:"w-full justify-start gap-4 text-sm font-medium text-red-400 hover:text-red-300 hover:bg-red-950/30 rounded-xl py-2.5 px-4 transition-all duration-200",onClick:f,children:[e.jsx(_,{className:"h-4 w-4"}),e.jsx("span",{children:"Cerrar Sesión"})]})]})]})]}),e.jsx("div",{className:r("sidebar-desktop transition-all duration-300",s?"lg:w-20":"lg:w-72"),children:e.jsxs("div",{className:"flex flex-col h-screen bg-gradient-to-b from-slate-900 via-slate-800 to-slate-900 shadow-2xl",children:[e.jsx("div",{className:r("flex h-20 items-center border-b border-slate-700/50 bg-gradient-to-r from-blue-600/20 to-purple-600/20 transition-all duration-300",s?"justify-center px-4":"justify-center px-6"),children:s?e.jsx("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg shadow-lg",children:e.jsx(m,{className:"h-6 w-6 text-white"})}):e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg shadow-lg",children:e.jsx(m,{className:"h-6 w-6 text-white"})}),e.jsx("span",{className:"text-xl font-bold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent",children:"Servidor de Administración"})]})}),e.jsx("nav",{className:"flex-1 space-y-2 px-4 py-6 overflow-y-auto",children:g.map(a=>{const n=c.pathname===a.href;return e.jsxs(d,{to:a.href,title:s?a.name:"",className:r("group flex items-center rounded-xl py-3.5 text-sm font-semibold transition-all duration-200",s?"justify-center px-2":"gap-4 px-4",n?"bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-lg shadow-blue-500/30 scale-105":"text-slate-300 hover:bg-slate-800/60 hover:text-white hover:scale-105 hover:shadow-md"),children:[e.jsx(a.icon,{className:r("h-5 w-5 flex-shrink-0 transition-transform duration-200",n?"text-white":"text-slate-400 group-hover:text-blue-400 group-hover:scale-110")}),!s&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"truncate",children:a.name}),n&&e.jsx("div",{className:"ml-auto h-2 w-2 rounded-full bg-white animate-pulse"})]})]},a.name)})}),e.jsxs("div",{className:"border-t border-slate-700/50 bg-slate-900/50 backdrop-blur-sm p-4 space-y-2",children:[!s&&e.jsx("div",{className:"px-3 py-2 mb-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-emerald-500 to-blue-500 rounded-full",children:e.jsx(x,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-semibold text-white truncate",children:((v=o.getUser())==null?void 0:v.username)||"Admin"}),e.jsx("p",{className:"text-xs text-slate-400 truncate",children:u(((j=o.getUser())==null?void 0:j.role)||"")})]})]})}),e.jsxs(d,{to:"/profile",title:s?"Mi Perfil":"",className:r("group flex items-center rounded-xl py-2.5 text-sm font-medium transition-all duration-200",s?"justify-center px-2":"gap-4 px-4",c.pathname==="/profile"?"bg-slate-800 text-blue-400 shadow-md":"text-slate-400 hover:bg-slate-800/60 hover:text-white"),children:[e.jsx(x,{className:"h-4 w-4 flex-shrink-0 group-hover:scale-110 transition-transform"}),!s&&e.jsx("span",{className:"truncate",children:"Mi Perfil"})]}),e.jsxs(d,{to:"/change-password",title:s?"Cambiar Contraseña":"",className:r("group flex items-center rounded-xl py-2.5 text-sm font-medium transition-all duration-200",s?"justify-center px-2":"gap-4 px-4",c.pathname==="/change-password"?"bg-slate-800 text-blue-400 shadow-md":"text-slate-400 hover:bg-slate-800/60 hover:text-white"),children:[e.jsx(k,{className:"h-4 w-4 flex-shrink-0 group-hover:scale-110 transition-transform"}),!s&&e.jsx("span",{className:"truncate",children:"Cambiar Contraseña"})]}),e.jsxs(h,{variant:"ghost",title:s?"Cerrar Sesión":"",className:r("w-full text-sm font-medium text-red-400 hover:text-red-300 hover:bg-red-950/30 rounded-xl py-2.5 transition-all duration-200 group",s?"justify-center px-2":"justify-start gap-4 px-4"),onClick:f,children:[e.jsx(_,{className:"h-4 w-4 group-hover:scale-110 transition-transform"}),!s&&e.jsx("span",{children:"Cerrar Sesión"})]})]})]})}),e.jsxs("div",{className:r("main-content transition-all duration-300",s?"lg:pl-20":"lg:pl-72"),children:[e.jsx("header",{className:"sticky top-0 z-10 bg-white/80 backdrop-blur-md border-b border-gray-200 shadow-sm",children:e.jsxs("div",{className:"flex h-16 items-center gap-4 px-4 lg:px-6",children:[e.jsx(h,{variant:"ghost",size:"icon",className:"lg:hidden hover:bg-gray-100 rounded-lg transition-colors",onClick:()=>i(!0),children:e.jsx(J,{className:"h-6 w-6 text-gray-700"})}),e.jsx(h,{variant:"ghost",size:"icon",className:"hidden lg:flex hover:bg-gray-100 rounded-lg transition-colors",onClick:()=>M(!s),title:s?"Expandir barra lateral":"Colapsar barra lateral",children:s?e.jsx(I,{className:"h-5 w-5 text-gray-700"}):e.jsx(B,{className:"h-5 w-5 text-gray-700"})}),e.jsx("div",{className:"flex-1"}),e.jsxs("div",{className:"hidden sm:flex items-center gap-3 px-3 py-2 bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl border border-blue-100",children:[e.jsx("div",{className:"p-1.5 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full",children:e.jsx(x,{className:"h-4 w-4 text-white"})}),e.jsx("div",{className:"text-sm",children:e.jsx("p",{className:"font-semibold text-gray-900",children:((N=o.getUser())==null?void 0:N.username)||"Admin"})})]})]})}),e.jsx("main",{className:"p-4 sm:p-6 lg:p-8 bg-gradient-to-br from-gray-50 via-blue-50/30 to-purple-50/30 min-h-screen",children:p})]})]})}export{ce as A,B as C,T as D,F as K,ee as S,se as U,re as W,I as a,q as b,Y as c};
//# sourceMappingURL=AdminLayout-536hJOLm.js.map
