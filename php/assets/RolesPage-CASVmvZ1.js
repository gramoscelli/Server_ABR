import{u as y,r as o,i as f,b as N,k as v,j as e,e as t,f as l,g as i,h as n,l as c}from"./index-CQK1xMEp.js";import{A as w,U as E,S as m}from"./AdminLayout-536hJOLm.js";import"./lock-D4HCCPhn.js";import"./log-out-CvvekA6y.js";function A(){const d=y(),[r,h]=o.useState(null),[g,p]=o.useState(!0),{toast:x}=f();o.useEffect(()=>{const s=N.getUser();if(!((s==null?void 0:s.role)==="root")){d("/profile");return}u()},[d]);const u=async()=>{try{const s=await v("/api/roles/stats");if(s.ok){const a=await s.json();h(a)}else{const a=await s.json().catch(()=>({}));x({variant:"destructive",title:"Error",description:a.message||"Error al cargar estadísticas de roles"})}}catch(s){console.error("[RolesPage] Error:",s),x({variant:"destructive",title:"Error",description:"Error de red al cargar estadísticas"})}finally{p(!1)}},j=s=>({root:"Administrador",admin_employee:"Empleado de Administración",library_employee:"Empleado de Biblioteca",new_user:"Usuario Nuevo",readonly:"Solo Lectura"})[s]||s,b=s=>({root:"bg-purple-100 text-purple-800 border-purple-200",admin_employee:"bg-blue-100 text-blue-800 border-blue-200",library_employee:"bg-green-100 text-green-800 border-green-200",new_user:"bg-yellow-100 text-yellow-800 border-yellow-200",readonly:"bg-gray-100 text-gray-800 border-gray-200"})[s]||"bg-gray-100 text-gray-800 border-gray-200";return e.jsx(w,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Roles y Permisos"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Gestionar roles del sistema y distribución de usuarios"})]})}),g?e.jsx(t,{children:e.jsx(l,{className:"py-8",children:e.jsx("div",{className:"text-center text-gray-500",children:"Cargando..."})})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(t,{children:[e.jsxs(i,{children:[e.jsxs(n,{className:"flex items-center gap-2",children:[e.jsx(E,{className:"h-5 w-5 text-blue-600"}),"Total de Usuarios"]}),e.jsx(c,{children:"Usuarios registrados en el sistema"})]}),e.jsx(l,{children:e.jsx("div",{className:"text-4xl font-bold text-gray-900",children:(r==null?void 0:r.total_users)||0})})]}),e.jsxs(t,{children:[e.jsxs(i,{children:[e.jsxs(n,{className:"flex items-center gap-2",children:[e.jsx(m,{className:"h-5 w-5 text-purple-600"}),"Roles Disponibles"]}),e.jsx(c,{children:"Roles configurados en el sistema"})]}),e.jsx(l,{children:e.jsx("div",{className:"text-4xl font-bold text-gray-900",children:(r==null?void 0:r.roles.length)||0})})]})]}),e.jsxs(t,{children:[e.jsxs(i,{children:[e.jsx(n,{children:"Distribución de Usuarios por Rol"}),e.jsx(c,{children:"Cantidad y porcentaje de usuarios en cada rol"})]}),e.jsx(l,{children:e.jsxs("div",{className:"space-y-4",children:[r==null?void 0:r.roles.map(s=>e.jsxs("div",{className:"border rounded-lg p-4 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(m,{className:"h-5 w-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-sm font-medium border ${b(s.name)}`,children:j(s.name)}),s.description&&e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:s.description})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:s.count}),e.jsxs("div",{className:"text-sm text-gray-500",children:[s.percentage,"%"]})]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-3",children:e.jsx("div",{className:`h-2 rounded-full ${s.name==="root"?"bg-purple-600":s.name==="admin_employee"?"bg-blue-600":s.name==="library_employee"?"bg-green-600":s.name==="new_user"?"bg-yellow-600":"bg-gray-600"}`,style:{width:`${s.percentage}%`}})})]},s.id)),(!(r!=null&&r.roles)||r.roles.length===0)&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No se encontraron roles configurados"})]})})]}),e.jsxs(t,{className:"border-blue-200 bg-blue-50",children:[e.jsx(i,{children:e.jsx(n,{className:"text-blue-900",children:"Información sobre Roles"})}),e.jsx(l,{children:e.jsxs("ul",{className:"space-y-2 text-sm text-blue-800",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"font-bold mt-0.5",children:"•"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Administrador:"})," Acceso completo al sistema, puede realizar cualquier operación"]})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"font-bold mt-0.5",children:"•"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Empleado de Administración:"})," Puede gestionar usuarios, roles y configuraciones del sistema"]})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"font-bold mt-0.5",children:"•"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Empleado de Biblioteca:"})," Usuario aprobado con acceso a funciones de la biblioteca"]})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"font-bold mt-0.5",children:"•"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Usuario Nuevo:"})," Cuenta creada pero pendiente de aprobación por un administrador"]})]})]})})]})]})]})})}export{A as default};
//# sourceMappingURL=RolesPage-CASVmvZ1.js.map
