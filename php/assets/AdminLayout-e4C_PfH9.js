import{c as n,r as A,a as O,u as M,b as l,j as e,y as a,E as h,X as U,L as c}from"./index-B2xrcMBU.js";import{L as j}from"./lock-DfNglbML.js";import{L as N}from"./log-out-CVeatBap.js";/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],d=n("circle-user",S);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],P=n("key",z);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],x=n("layout-dashboard",$);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],B=n("menu",q);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],R=n("settings",E);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],K=n("shield",I);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],D=n("users",V),H=[{name:"Panel de Control",href:"/dashboard",icon:x,rootOnly:!0},{name:"Usuarios",href:"/admin/users",icon:D,adminOnly:!0},{name:"Roles",href:"/admin/roles",icon:K,adminOnly:!0},{name:"Claves API",href:"/admin/api-keys",icon:P,adminOnly:!0},{name:"Configuración",href:"/admin/settings",icon:R,adminOnly:!0}];function G({children:m}){var g,b,f,y,v;const[w,o]=A.useState(!1),i=O(),k=M(),s=l.getUser(),C=(s==null?void 0:s.role)==="root",_=(s==null?void 0:s.role)==="admin"||(s==null?void 0:s.role)==="root"||(s==null?void 0:s.role)==="admin_employee";s!=null&&s.role&&["new_user"].includes(s.role.toLowerCase());const L=(s==null?void 0:s.must_change_password)===!0,p=H.filter(t=>!("rootOnly"in t&&t.rootOnly&&!C||"adminOnly"in t&&t.adminOnly&&!_));if(L)return e.jsx("div",{className:"min-h-screen bg-gray-50",children:m});const u=async()=>{try{await fetch("/api/auth/logout",{method:"POST",credentials:"include"})}catch(t){console.error("Logout failed:",t)}finally{l.clearAuth(),k("/login")}};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsxs("div",{className:a("sidebar-mobile fixed inset-0 z-40",w?"block":"hidden"),children:[e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>o(!1)}),e.jsxs("div",{className:"fixed inset-y-0 left-0 flex w-72 flex-col bg-gradient-to-b from-slate-900 via-slate-800 to-slate-900 shadow-2xl",children:[e.jsxs("div",{className:"flex h-20 items-center justify-between px-6 border-b border-slate-700/50 bg-gradient-to-r from-blue-600/20 to-purple-600/20",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg shadow-lg",children:e.jsx(x,{className:"h-6 w-6 text-white"})}),e.jsx("span",{className:"text-xl font-bold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent",children:"BiblioServer"})]}),e.jsx(h,{variant:"ghost",size:"icon",onClick:()=>o(!1),className:"text-slate-300 hover:text-white hover:bg-slate-800 rounded-lg",children:e.jsx(U,{className:"h-6 w-6"})})]}),e.jsx("nav",{className:"flex-1 space-y-2 px-4 py-6 overflow-y-auto",children:p.map(t=>{const r=i.pathname===t.href;return e.jsxs(c,{to:t.href,className:a("group flex items-center gap-4 rounded-xl px-4 py-3.5 text-sm font-semibold transition-all duration-200",r?"bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-lg shadow-blue-500/30":"text-slate-300 hover:bg-slate-800/60 hover:text-white"),onClick:()=>o(!1),children:[e.jsx(t.icon,{className:a("h-5 w-5 flex-shrink-0 transition-transform duration-200",r?"text-white":"text-slate-400 group-hover:text-blue-400")}),e.jsx("span",{className:"truncate",children:t.name}),r&&e.jsx("div",{className:"ml-auto h-2 w-2 rounded-full bg-white animate-pulse"})]},t.name)})}),e.jsxs("div",{className:"border-t border-slate-700/50 bg-slate-900/50 backdrop-blur-sm p-4 space-y-2",children:[e.jsx("div",{className:"px-3 py-2 mb-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-emerald-500 to-blue-500 rounded-full",children:e.jsx(d,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-semibold text-white truncate",children:((g=l.getUser())==null?void 0:g.username)||"Admin"}),e.jsx("p",{className:"text-xs text-slate-400 truncate",children:((b=l.getUser())==null?void 0:b.role)||"Administrator"})]})]})}),e.jsxs(c,{to:"/profile",className:a("group flex items-center gap-4 rounded-xl px-4 py-2.5 text-sm font-medium transition-all duration-200",i.pathname==="/profile"?"bg-slate-800 text-blue-400 shadow-md":"text-slate-400 hover:bg-slate-800/60 hover:text-white"),onClick:()=>o(!1),children:[e.jsx(d,{className:"h-4 w-4 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Mi Perfil"})]}),e.jsxs(c,{to:"/change-password",className:a("group flex items-center gap-4 rounded-xl px-4 py-2.5 text-sm font-medium transition-all duration-200",i.pathname==="/change-password"?"bg-slate-800 text-blue-400 shadow-md":"text-slate-400 hover:bg-slate-800/60 hover:text-white"),onClick:()=>o(!1),children:[e.jsx(j,{className:"h-4 w-4 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Cambiar Contraseña"})]}),e.jsxs(h,{variant:"ghost",className:"w-full justify-start gap-4 text-sm font-medium text-red-400 hover:text-red-300 hover:bg-red-950/30 rounded-xl py-2.5 px-4 transition-all duration-200",onClick:u,children:[e.jsx(N,{className:"h-4 w-4"}),e.jsx("span",{children:"Logout"})]})]})]})]}),e.jsx("div",{className:"sidebar-desktop",children:e.jsxs("div",{className:"flex flex-col h-screen bg-gradient-to-b from-slate-900 via-slate-800 to-slate-900 shadow-2xl",children:[e.jsx("div",{className:"flex h-20 items-center justify-center px-6 border-b border-slate-700/50 bg-gradient-to-r from-blue-600/20 to-purple-600/20",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg shadow-lg",children:e.jsx(x,{className:"h-6 w-6 text-white"})}),e.jsx("span",{className:"text-xl font-bold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent",children:"BiblioServer"})]})}),e.jsx("nav",{className:"flex-1 space-y-2 px-4 py-6 overflow-y-auto",children:p.map(t=>{const r=i.pathname===t.href;return e.jsxs(c,{to:t.href,className:a("group flex items-center gap-4 rounded-xl px-4 py-3.5 text-sm font-semibold transition-all duration-200",r?"bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-lg shadow-blue-500/30 scale-105":"text-slate-300 hover:bg-slate-800/60 hover:text-white hover:scale-105 hover:shadow-md"),children:[e.jsx(t.icon,{className:a("h-5 w-5 flex-shrink-0 transition-transform duration-200",r?"text-white":"text-slate-400 group-hover:text-blue-400 group-hover:scale-110")}),e.jsx("span",{className:"truncate",children:t.name}),r&&e.jsx("div",{className:"ml-auto h-2 w-2 rounded-full bg-white animate-pulse"})]},t.name)})}),e.jsxs("div",{className:"border-t border-slate-700/50 bg-slate-900/50 backdrop-blur-sm p-4 space-y-2",children:[e.jsx("div",{className:"px-3 py-2 mb-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-emerald-500 to-blue-500 rounded-full",children:e.jsx(d,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-semibold text-white truncate",children:((f=l.getUser())==null?void 0:f.username)||"Admin"}),e.jsx("p",{className:"text-xs text-slate-400 truncate",children:((y=l.getUser())==null?void 0:y.role)||"Administrator"})]})]})}),e.jsxs(c,{to:"/profile",className:a("group flex items-center gap-4 rounded-xl px-4 py-2.5 text-sm font-medium transition-all duration-200",i.pathname==="/profile"?"bg-slate-800 text-blue-400 shadow-md":"text-slate-400 hover:bg-slate-800/60 hover:text-white"),children:[e.jsx(d,{className:"h-4 w-4 flex-shrink-0 group-hover:scale-110 transition-transform"}),e.jsx("span",{className:"truncate",children:"Mi Perfil"})]}),e.jsxs(c,{to:"/change-password",className:a("group flex items-center gap-4 rounded-xl px-4 py-2.5 text-sm font-medium transition-all duration-200",i.pathname==="/change-password"?"bg-slate-800 text-blue-400 shadow-md":"text-slate-400 hover:bg-slate-800/60 hover:text-white"),children:[e.jsx(j,{className:"h-4 w-4 flex-shrink-0 group-hover:scale-110 transition-transform"}),e.jsx("span",{className:"truncate",children:"Cambiar Contraseña"})]}),e.jsxs(h,{variant:"ghost",className:"w-full justify-start gap-4 text-sm font-medium text-red-400 hover:text-red-300 hover:bg-red-950/30 rounded-xl py-2.5 px-4 transition-all duration-200 group",onClick:u,children:[e.jsx(N,{className:"h-4 w-4 group-hover:scale-110 transition-transform"}),e.jsx("span",{children:"Logout"})]})]})]})}),e.jsxs("div",{className:"main-content",children:[e.jsx("header",{className:"sticky top-0 z-10 bg-white/80 backdrop-blur-md border-b border-gray-200 shadow-sm",children:e.jsxs("div",{className:"flex h-16 items-center gap-4 px-4 lg:px-6",children:[e.jsx(h,{variant:"ghost",size:"icon",className:"menu-button hover:bg-gray-100 rounded-lg transition-colors",onClick:()=>o(!0),children:e.jsx(B,{className:"h-6 w-6 text-gray-700"})}),e.jsx("div",{className:"flex-1"}),e.jsxs("div",{className:"hidden sm:flex items-center gap-3 px-3 py-2 bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl border border-blue-100",children:[e.jsx("div",{className:"p-1.5 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full",children:e.jsx(d,{className:"h-4 w-4 text-white"})}),e.jsx("div",{className:"text-sm",children:e.jsx("p",{className:"font-semibold text-gray-900",children:((v=l.getUser())==null?void 0:v.username)||"Admin"})})]})]})}),e.jsx("main",{className:"p-4 sm:p-6 lg:p-8 bg-gradient-to-br from-gray-50 via-blue-50/30 to-purple-50/30 min-h-screen",children:m})]})]})}export{G as A,P as K,K as S,D as U,R as a};
//# sourceMappingURL=AdminLayout-e4C_PfH9.js.map
