import{d as j,u as y,r as l,j as e,L as d}from"./index-C1GA9Qxv.js";import{L as p}from"./loader-circle-BEuCgZXk.js";import{C as m}from"./circle-check-O-Sz6jck.js";import{C as b}from"./circle-x-DLPO0AQB.js";function k(){const[x]=j(),f=y(),[s,r]=l.useState("loading"),[a,i]=l.useState(""),t=x.get("token");l.useEffect(()=>{if(!t){r("error"),i("Token de verificación no encontrado");return}u(t)},[t]);const u=async g=>{try{const c=await fetch("/api/csrf-token",{credentials:"include"}),{csrfToken:h}=await c.json(),o=await fetch("/api/auth/verify-email",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":h},credentials:"include",body:JSON.stringify({token:g})}),n=await o.json();o.ok?(n.alreadyVerified?(r("already-verified"),i("Este email ya ha sido verificado anteriormente")):(r("success"),i(n.message||"Email verificado exitosamente")),setTimeout(()=>{f("/login")},3e3)):(r("error"),i(n.message||"Error al verificar el email"))}catch{r("error"),i("Error de conexión al verificar el email")}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:e.jsxs("div",{className:"max-w-md w-full space-y-8 p-8 bg-white rounded-lg shadow-md",children:[e.jsxs("div",{className:"text-center",children:[s==="loading"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-blue-100 mb-4",children:e.jsx(p,{className:"h-6 w-6 text-blue-600 animate-spin"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Verificando Email"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Por favor espera mientras verificamos tu dirección de email..."})]}),s==="success"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 mb-4",children:e.jsx(m,{className:"h-6 w-6 text-green-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"¡Email Verificado!"}),e.jsx("p",{className:"mt-4 text-gray-600",children:a}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Serás redirigido al login en 3 segundos..."})]}),s==="already-verified"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-blue-100 mb-4",children:e.jsx(m,{className:"h-6 w-6 text-blue-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Email Ya Verificado"}),e.jsx("p",{className:"mt-4 text-gray-600",children:a}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Serás redirigido al login en 3 segundos..."})]}),s==="error"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4",children:e.jsx(b,{className:"h-6 w-6 text-red-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Error de Verificación"}),e.jsx("p",{className:"mt-4 text-gray-600",children:a})]})]}),s==="error"&&e.jsxs("div",{className:"mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-semibold text-yellow-900 mb-2",children:"¿Qué puedes hacer?"}),e.jsxs("ul",{className:"text-xs text-yellow-800 space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"Verifica que el enlace no esté incompleto"}),e.jsx("li",{children:"El token puede haber expirado (válido por 24 horas)"}),e.jsx("li",{children:"Solicita un nuevo email de verificación"})]})]}),e.jsxs("div",{className:"text-center space-y-3 mt-6",children:[e.jsx(d,{to:"/login",className:"inline-block w-full py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Ir al Login"}),s==="error"&&e.jsx(d,{to:"/resend-verification",className:"inline-block w-full py-2 px-4 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Reenviar Email de Verificación"})]})]})})}export{k as default};
//# sourceMappingURL=VerifyEmailPage-D8FMJrnH.js.map
