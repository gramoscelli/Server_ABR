================================================================================
BIBLIO-SERVER FRONTEND ADMIN INTERFACE - QUICK REFERENCE
================================================================================

CURRENT STATUS: 20% Complete (Foundation Ready, Features Missing)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

TECHNOLOGY STACK:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Framework:     Next.js 15 (App Router)                                  â”‚
â”‚ Language:      TypeScript 5+                                            â”‚
â”‚ Styling:       Tailwind CSS 4.1.17 + @tailwindcss/forms               â”‚
â”‚ Auth:          JWT + HTTP-only Cookies                                 â”‚
â”‚ Port:          3001                                                     â”‚
â”‚ Build Tool:    SWC (compiled with Next.js)                            â”‚
â”‚ Package Mgr:   npm                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

PAGES CREATED:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ… COMPLETE:
  /login                  - Login form with CSRF protection
  /                       - Root (redirects to /login)
  /api/csrf-token        - CSRF token endpoint
  /api/auth/login        - Login handler (proxies to backend)
  /api/auth/logout       - Logout handler

âœ… PARTIALLY COMPLETE:
  /dashboard             - User listing (read-only table)
  /api/admin/users       - Users API proxy

âŒ MISSING:
  /admin/users           - User management (edit, delete, lock/unlock)
  /admin/roles           - Role management
  /admin/apikeys         - API key management
  /admin/dashboard       - Admin statistics/overview
  /components/*          - No reusable UI components
  middleware.ts          - No automatic route protection

AUTHENTICATION FLOW:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  Browser                    Next.js Server              Express Backend
    â”‚                              â”‚                           â”‚
    â”œâ”€ GET /api/csrf-token â”€â”€â”€â”€â”€â”€â”€>â”‚â”€ GET /api/csrf-token â”€â”€â”€>â”‚
    â”‚                              â”‚<â”€â”€â”€â”€â”€â”€ token â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚<â”€â”€â”€â”€â”€ token â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                           â”‚
    â”‚                              â”‚                           â”‚
    â”œâ”€ POST /api/auth/login â”€â”€â”€â”€â”€â”€â”€>â”‚â”€ POST /api/auth/login â”€â”€>â”‚
    â”‚  (with CSRF token)           â”‚  (proxies request)       â”‚
    â”‚                              â”‚<â”€â”€â”€â”€ tokens â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚                              â”‚ (stores in HTTP-only)    â”‚
    â”‚<â”€â”€â”€â”€â”€â”€ success â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                           â”‚
    â”‚                              â”‚                           â”‚
    â”‚ (Redirect to /dashboard)     â”‚                           â”‚
    â”‚                              â”‚                           â”‚
    â”œâ”€ GET /dashboard â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚ (Check auth_token cookie)
    â”‚                              â”‚â”€ GET /api/admin/users â”€â”€>â”‚
    â”‚                              â”‚<â”€â”€â”€â”€â”€â”€ users â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚<â”€â”€â”€â”€â”€ render page â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                           â”‚

SECURITY FEATURES:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ… IMPLEMENTED:
  â€¢ CSRF token validation on all state-changing operations
  â€¢ HTTP-only cookies (tokens not accessible to JavaScript)
  â€¢ Secure flag on cookies (production only)
  â€¢ JWT tokens with expiration (1 hour access, 7 days refresh)
  â€¢ Rate limiting (5 auth attempts per 15 minutes)
  â€¢ Input validation on backend
  â€¢ Authorization roles on backend (admin, user, readonly)

âŒ MISSING:
  â€¢ Route middleware protection (manual checks only)
  â€¢ Automatic token refresh when expired
  â€¢ Frontend authorization checks (RBAC)
  â€¢ Session validation on initial load
  â€¢ Refresh token rotation

BACKEND API ENDPOINTS AVAILABLE (NOT ALL IN FRONTEND):
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

User Management:
  âœ… GET    /api/admin/users                (USED)
  âŒ GET    /api/admin/users/locked         
  âŒ POST   /api/admin/users/:id/unlock     
  âŒ PATCH  /api/admin/users/:id/reset-attempts

Role Management:
  âŒ GET    /api/roles
  âŒ GET    /api/roles/stats
  âŒ PUT    /api/roles/user/:id
  âŒ DELETE /api/roles/user/:id

API Keys Management:
  âŒ GET    /api/api-keys
  âŒ POST   /api/api-keys
  âŒ PUT    /api/api-keys/:id
  âŒ DELETE /api/api-keys/:id
  âŒ GET    /api/api-keys/:id/stats

DATA MODELS (AVAILABLE IN BACKEND):
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

User:
  id, username, email, password_hash, role_id, 
  failed_attempts, locked_until, last_login,
  oauth_only, email_verified, avatar_url, whatsapp,
  created_at, updated_at

Role:
  id, name, description, created_at, updated_at

ApiKey:
  id, user_id, key_hash, name, permissions, 
  rate_limit, last_used, created_at, updated_at

RolePermission:
  role_id, permission_id, created_at

UI COMPONENTS & STYLING:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Color Scheme:
  Primary:     Indigo-600 (#4f46e5)
  Background:  Gray-50 (#f9fafb)
  Text:        Gray-900 (#111827)
  Borders:     Gray-200 (#e5e7eb)

Components Built:
  âŒ Button (no reusable component)
  âŒ Modal/Dialog
  âŒ Alert/Toast
  âŒ Sidebar Navigation
  âŒ Data Table (with pagination/sorting/filtering)
  âŒ Form Input Components
  âŒ Loading Spinner
  âŒ Card Container

Styling Approach:
  â€¢ Inline Tailwind classes (no component extraction)
  â€¢ Forms plugin enabled
  â€¢ No theming system
  â€¢ No dark mode
  â€¢ Basic responsive design

CRITICAL MISSING FEATURES:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

HIGH PRIORITY:
  1. Route middleware (middleware.ts)
  2. Reusable UI components (Button, Modal, etc.)
  3. Sidebar navigation component
  4. User management page (full CRUD)
  5. Automatic token refresh

MEDIUM PRIORITY:
  6. Role management page
  7. API key management page
  8. Admin dashboard with charts
  9. Data table features (pagination, filtering, sorting)
  10. Form validation

LOW PRIORITY:
  11. OAuth UI integration
  12. User activity logs
  13. Audit trail viewer
  14. Dark mode
  15. Advanced search

FILE LOCATIONS:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Frontend:
  ðŸ“‚ /home/gustavo/biblio-server/frontend/
     â”œâ”€â”€ app/
     â”‚   â”œâ”€â”€ api/auth/login/route.ts
     â”‚   â”œâ”€â”€ api/auth/logout/route.ts
     â”‚   â”œâ”€â”€ api/csrf-token/route.ts
     â”‚   â”œâ”€â”€ api/admin/users/route.ts
     â”‚   â”œâ”€â”€ login/page.tsx
     â”‚   â”œâ”€â”€ dashboard/page.tsx
     â”‚   â”œâ”€â”€ layout.tsx
     â”‚   â”œâ”€â”€ page.tsx
     â”‚   â””â”€â”€ globals.css
     â”œâ”€â”€ components/ (EMPTY)
     â”œâ”€â”€ lib/ (EMPTY)
     â””â”€â”€ package.json

Backend (for reference):
  ðŸ“‚ /home/gustavo/biblio-server/app/
     â”œâ”€â”€ routes/
     â”‚   â”œâ”€â”€ admin.js
     â”‚   â”œâ”€â”€ roles.js
     â”‚   â”œâ”€â”€ apiKeys.js
     â”‚   â”œâ”€â”€ auth.js
     â”‚   â””â”€â”€ csrf.js
     â”œâ”€â”€ models/
     â”‚   â”œâ”€â”€ User.js
     â”‚   â”œâ”€â”€ Role.js
     â”‚   â””â”€â”€ ApiKey.js
     â””â”€â”€ middleware/
         â””â”€â”€ auth.js

NEXT STEPS (RECOMMENDED ORDER):
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. Create middleware.ts for route protection
2. Build UI component library:
   - Button, Card, Modal, Alert components
   - Form components (Input, Select, Checkbox)
   - Data table wrapper
3. Create Sidebar layout component
4. Implement token refresh mechanism
5. Build user management page (/admin/users)
6. Build role management page (/admin/roles)
7. Build API keys page (/admin/apikeys)
8. Add form validation (Zod/React Hook Form)
9. Add toast notification system
10. Build admin dashboard with statistics

SUGGESTED PACKAGES TO ADD:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

npm install:
  @headlessui/react          # Unstyled components
  lucide-react               # Icon library
  react-hook-form            # Form management
  zod                        # Schema validation
  @hookform/resolvers        # Form validation integration
  react-hot-toast            # Toast notifications
  @tanstack/react-table      # Advanced table features

For development:
  npm install -D prettier eslint-config-prettier

COMPLETION ESTIMATE:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Phase 1 (Foundation):          5-7 days
Phase 2 (Core admin pages):    10-15 days
Phase 3 (UX improvements):     7-10 days
Phase 4 (Advanced features):   10-15 days

Total for full implementation: 32-47 days (5-7 weeks)

Currently Complete: ~20%
After Phase 1: ~35%
After Phase 2: ~70%
After Phase 3: ~85%
After Phase 4: ~100%

================================================================================
